<?xml version="1.0"	encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="studymenu">

	<select id="menuCount" resultType="int" parameterType="string">
		select count(*) from study_menu where menuid = #{menuid}
	</select>
	
	<select id="menuAllCount" resultType="int">
		select count(*) from study_menu
	</select>

	<select id="menuList" resultType="studymenu" parameterType="map">
		select * from ( select rownum rnum, a.* from (
		select * from study_menu where menuid = #{menuid} order by board_num desc) a)
		where rnum BETWEEN #{start} and #{end}
	</select>
	
	<select id="allList" resultType="studymenu" parameterType="map">
		select * from ( select rownum rnum, a.* from (
		select * from study_menu order by regdate desc) a)
		where rnum BETWEEN #{start} and #{end}
	</select>
		
	<insert id="insertMenu" parameterType="studymenu">
	insert into study_menu values 
	(#{board_num},#{nickname},#{title},#{subject},#{price},#{pernum},#{region},#{content},#{menuid},sysdate,#{latitude},#{longitude})
	</insert>
	
	<select id = "menuNextNum" resultType = "int">
	select board_seq.nextval from dual
	</select>
	
	<select id = "menuBoardOne" resultType = "studymenu" parameterType ="int">
	select * from study_menu where board_num = #{board_num}
	</select>
	

	

	<select id="list2"  resultType="studymenu" parameterType = "map">
	select * form study_menu where nickname = #{nickname}
	</select>
	
	
	
<!-- 	<select id = "allList" resultType = "studymenu">
	select * from  ( select rownum rnum, a.* from (
		select * from study_menu) a) where rnum BETWEEN #{start} and #{end}		
	</select> -->


	<select id="studySearch" parameterType="map" resultType="StudyMenu">
	select * from study_menu where (${part}) like upper (#{searchData})
	and menuid = #{menuid}
	</select>
>>>>>>> 2eedd190cfafe8fa31993d6e324719b967e55d2e
	
	<select id="studySearchCount" resultType="int" parameterType="map">
	select count(*) from study_menu where  menuid = #{menuid}
	and (${part}) like upper (#{searchData})
	</select>
	
	<select id = "studySearchList" resultType = "studymenu"  parameterType = "map">
	select * from (select rownum rnum, a.* from 
	(select * from study_menu where menuid = #{menuid} and (${part}) like upper (#{searchData}) order by regdate desc) a)
	where rnum between #{start} and #{end}
	</select> 
	
	<select id="allstudySearch" parameterType="Search" resultType="StudyMenu">
	select * from study_menu where upper (${part}) like upper (#{searchData}) order by regdate desc
	</select>
	
	<select id="allstudySearchCount" resultType="int" parameterType="map">
	select count(*) from study_menu where (${part}) like upper (#{searchData})
	</select>
	
	<select id = "studySearchAllList" resultType = "studymenu"  parameterType = "map">
	select * from (select rownum rnum, a.* from 
	(select * from study_menu (${part}) like upper (#{searchData}) order by regdate desc) a)
	where rnum between #{start} and #{end}
	</select> 
	
</mapper>